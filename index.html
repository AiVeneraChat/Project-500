<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Project 500 - Угадай число</title>
    <style>
        :root {
            --primary-color: #0f0;
            --secondary-color: #0a0;
            --background-color: #000;
            --container-bg: #111;
            --game-area-bg: #050505;
            --text-color: #0f0;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 15px;
            background-color: var(--background-color);
            color: var(--text-color);
            image-rendering: pixelated;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.4;
        }
        
        /* Эффект старого ЭЛТ-монитора */
        .crt-effect::before {
            content: " ";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            z-index: 10000;
            pointer-events: none;
        }
        
        .crt-effect::after {
            content: " ";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.1);
            opacity: 0;
            z-index: 10001;
            pointer-events: none;
            animation: flicker 0.15s infinite;
        }
        
        @keyframes flicker {
            0% { opacity: 0.1; }
            5% { opacity: 0.1; }
            10% { opacity: 0.2; }
            15% { opacity: 0.1; }
            20% { opacity: 0.3; }
            25% { opacity: 0.1; }
            30% { opacity: 0.2; }
            35% { opacity: 0.1; }
            40% { opacity: 0.2; }
            45% { opacity: 0.1; }
            50% { opacity: 0.3; }
            55% { opacity: 0.1; }
            60% { opacity: 0.2; }
            65% { opacity: 0.1; }
            70% { opacity: 0.1; }
            75% { opacity: 0.2; }
            80% { opacity: 0.1; }
            85% { opacity: 0.2; }
            90% { opacity: 0.1; }
            95% { opacity: 0.3; }
            100% { opacity: 0.1; }
        }
        
        .scan-line {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(0, 255, 0, 0.3);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
            z-index: 9999;
            pointer-events: none;
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }
        
        .container {
            background-color: var(--container-bg);
            border-radius: 0;
            padding: 15px;
            box-shadow: 0 0 10px var(--primary-color);
            border: 2px solid var(--primary-color);
            position: relative;
            z-index: 1;
            max-width: 100%;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin: 0 0 10px;
            font-size: 22px;
            text-shadow: 2px 2px 0 #030;
            width: 100%;
        }
        
        .subtitle {
            text-align: center;
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .game-area {
            margin: 15px 0;
            padding: 12px;
            border: 2px solid var(--secondary-color);
            border-radius: 0;
            background-color: var(--game-area-bg);
        }
        
        input[type="number"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid var(--secondary-color);
            border-radius: 0;
            box-sizing: border-box;
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Courier New', Courier, monospace;
            font-size: 18px;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        
        /* Убираем стрелки в input number */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .buttons-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }
        
        button {
            background-color: var(--background-color);
            color: var(--text-color);
            border: 2px solid var(--primary-color);
            padding: 12px 15px;
            border-radius: 0;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Courier New', Courier, monospace;
            image-rendering: pixelated;
            transition: all 0.3s ease;
            flex: 1;
            min-height: 50px;
        }
        
        button:hover, button:active {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        button:disabled {
            background-color: #222;
            color: #050;
            border-color: #050;
            cursor: not-allowed;
        }
        
        #newGameBtn {
            background-color: var(--background-color);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        
        #newGameBtn:hover, #newGameBtn:active {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        .message {
            padding: 12px;
            margin: 15px 0;
            border-radius: 0;
            text-align: center;
            font-weight: bold;
            border: 2px solid var(--secondary-color);
            font-size: 16px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .hint {
            background-color: #051005;
            border: 2px solid var(--secondary-color);
            color: var(--text-color);
        }
        
        .success {
            background-color: #051005;
            border: 2px solid var(--primary-color);
            color: var(--text-color);
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { box-shadow: 0 0 5px var(--primary-color); }
            to { box-shadow: 0 0 20px var(--primary-color); }
        }
        
        .attempts {
            margin-top: 15px;
            font-style: italic;
            color: var(--secondary-color);
            text-align: center;
            font-size: 16px;
        }
        
        .rules {
            margin-top: 20px;
            padding: 12px;
            background-color: #051005;
            border-radius: 0;
            font-size: 14px;
            border: 2px solid var(--secondary-color);
        }
        
        .rules h3 {
            margin-top: 0;
            text-align: center;
        }
        
        .rules ul {
            padding-left: 20px;
            margin-bottom: 0;
        }
        
        .rules li {
            margin-bottom: 8px;
        }
        
        .pixel-border {
            border-style: solid;
            border-width: 4px;
            border-color: var(--primary-color) #050 #050 var(--primary-color);
        }
        
        .pixel-border-reverse {
            border-style: solid;
            border-width: 4px;
            border-color: #050 var(--primary-color) var(--primary-color) #050;
        }
        
        .history-section {
            margin: 15px 0;
            padding: 10px;
            background-color: #051005;
            border: 1px solid var(--secondary-color);
        }
        
        .history-section h3 {
            margin-top: 0;
            text-align: center;
        }
        
        .history-list {
            max-height: 120px;
            overflow-y: auto;
            margin-top: 10px;
            padding: 8px;
            background-color: var(--background-color);
            border: 1px dashed var(--secondary-color);
            font-size: 14px;
            color: var(--secondary-color);
        }
        
        /* Стилизация скроллбара */
        .history-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .history-list::-webkit-scrollbar-track {
            background: #051005;
            border: 1px solid var(--secondary-color);
        }
        
        .history-list::-webkit-scrollbar-thumb {
            background: var(--secondary-color);
            border: 1px solid var(--primary-color);
        }
        
        .history-list::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }
        
        .history-item {
            margin: 5px 0;
            padding: 3px;
            border-bottom: 1px solid var(--secondary-color);
        }
        
        /* Визуализация диапазона */
        .range-visualization {
            margin: 20px 0;
            padding: 10px;
            background-color: var(--background-color);
            border: 1px solid var(--secondary-color);
            position: relative;
        }
        
        .range-visualization.narrow-range {
            box-shadow: 0 0 15px var(--primary-color), 0 0 30px var(--primary-color);
            animation: narrow-pulse 1s infinite alternate;
        }
        
        @keyframes narrow-pulse {
            from { box-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color); }
            to { box-shadow: 0 0 20px var(--primary-color), 0 0 40px var(--primary-color); }
        }
        
        .range-scale {
            position: relative;
            width: 100%;
            height: 40px;
            background-color: #051005;
            border: 1px solid var(--secondary-color);
            margin-bottom: 10px;
        }
        
        .range-numbers {
            display: flex;
            justify-content: space-between;
            color: var(--secondary-color);
            font-size: 12px;
            margin-top: 5px;
        }
        
        .range-current {
            position: absolute;
            height: 100%;
            background-color: rgba(0, 255, 0, 0.2);
            border: 1px solid var(--primary-color);
            transition: all 0.5s ease;
        }
        
        .range-marker {
            position: absolute;
            width: 2px;
            height: 100%;
            top: 0;
        }
        
        .range-marker.higher {
            background-color: #ff0;
        }
        
        .range-marker.lower {
            background-color: #0ff;
        }
        
        .range-marker.correct {
            background-color: var(--primary-color);
            width: 4px;
            height: 120%;
            top: -10%;
            box-shadow: 0 0 10px var(--primary-color);
            animation: correct-pulse 1s infinite;
        }
        
        @keyframes correct-pulse {
            0% { box-shadow: 0 0 5px var(--primary-color); }
            50% { box-shadow: 0 0 15px var(--primary-color); }
            100% { box-shadow: 0 0 5px var(--primary-color); }
        }
        
        .marker-label {
            position: absolute;
            top: -20px;
            left: -10px;
            font-size: 10px;
            color: var(--primary-color);
            background-color: var(--background-color);
            padding: 2px;
            border: 1px solid var(--secondary-color);
        }
        
        .stats {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--secondary-color);
        }
        
        .stats-row {
            display: flex;
            justify-content: space-between;
        }
        
        .glitch-text {
            position: relative;
            display: inline-block;
        }
        
        .glitch-text::before,
        .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .glitch-text::before {
            left: 2px;
            text-shadow: -1px 0 red;
            clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }
        
        .glitch-text::after {
            left: -2px;
            text-shadow: -1px 0 blue;
            clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }
        
        @keyframes glitch-anim {
            0% { clip: rect(42px, 9999px, 44px, 0); }
            5% { clip: rect(12px, 9999px, 59px, 0); }
            10% { clip: rect(48px, 9999px, 29px, 0); }
            15% { clip: rect(42px, 9999px, 73px, 0); }
            20% { clip: rect(63px, 9999px, 27px, 0); }
            25% { clip: rect(34px, 9999px, 55px, 0); }
            30% { clip: rect(86px, 9999px, 73px, 0); }
            35% { clip: rect(20px, 9999px, 20px, 0); }
            40% { clip: rect(26px, 9999px, 60px, 0); }
            45% { clip: rect(25px, 9999px, 66px, 0); }
            50% { clip: rect(57px, 9999px, 98px, 0); }
            55% { clip: rect(5px, 9999px, 46px, 0); }
            60% { clip: rect(30px, 9999px, 16px, 0); }
            65% { clip: rect(59px, 9999px, 50px, 0); }
            70% { clip: rect(41px, 9999px, 62px, 0); }
            75% { clip: rect(2px, 9999px, 82px, 0); }
            80% { clip: rect(47px, 9999px, 73px, 0); }
            85% { clip: rect(3px, 9999px, 27px, 0); }
            90% { clip: rect(26px, 9999px, 55px, 0); }
            95% { clip: rect(42px, 9999px, 97px, 0); }
            100% { clip: rect(38px, 9999px, 49px, 0); }
        }
        
        @keyframes glitch-anim2 {
            0% { clip: rect(65px, 9999px, 100px, 0); }
            5% { clip: rect(52px, 9999px, 74px, 0); }
            10% { clip: rect(79px, 9999px, 85px, 0); }
            15% { clip: rect(75px, 9999px, 5px, 0); }
            20% { clip: rect(67px, 9999px, 61px, 0); }
            25% { clip: rect(14px, 9999px, 79px, 0); }
            30% { clip: rect(1px, 9999px, 66px, 0); }
            35% { clip: rect(86px, 9999px, 30px, 0); }
            40% { clip: rect(23px, 9999px, 98px, 0); }
            45% { clip: rect(85px, 9999px, 72px, 0); }
            50% { clip: rect(71px, 9999px, 75px, 0); }
            55% { clip: rect(2px, 9999px, 48px, 0); }
            60% { clip: rect(30px, 9999px, 16px, 0); }
            65% { clip: rect(59px, 9999px, 50px, 0); }
            70% { clip: rect(41px, 9999px, 62px, 0); }
            75% { clip: rect(2px, 9999px, 82px, 0); }
            80% { clip: rect(47px, 9999px, 73px, 0); }
            85% { clip: rect(3px, 9999px, 27px, 0); }
            90% { clip: rect(26px, 9999px, 55px, 0); }
            95% { clip: rect(42px, 9999px, 97px, 0); }
            100% { clip: rect(38px, 9999px, 49px, 0); }
        }
        
        .terminal-text {
            color: var(--primary-color);
            border-right: 2px solid var(--primary-color);
            padding-right: 5px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { border-color: var(--primary-color); }
            50% { border-color: transparent; }
        }
        
        /* Стили для статистики */
        .stats-section {
            margin: 20px 0;
            padding: 12px;
            background-color: #051005;
            border: 1px solid var(--secondary-color);
        }
        
        .stats-section h3 {
            margin-top: 0;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-item {
            padding: 8px;
            background-color: var(--background-color);
            border: 1px solid var(--secondary-color);
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--secondary-color);
        }
        
        /* Новые эффекты */
        .crt-noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.1"/></svg>');
            z-index: 102;
            pointer-events: none;
            opacity: 0.05;
            animation: noise 0.2s infinite;
        }
        
        @keyframes noise {
            0% { transform: translate(0,0); }
            10% { transform: translate(-1%,-1%); }
            20% { transform: translate(-2%,1%); }
            30% { transform: translate(1%,-2%); }
            40% { transform: translate(-1%,2%); }
            50% { transform: translate(2%,-1%); }
            60% { transform: translate(-2%,1%); }
            70% { transform: translate(1%,-2%); }
            80% { transform: translate(-1%,2%); }
            90% { transform: translate(2%,-1%); }
            100% { transform: translate(0,0); }
        }
        
        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.9);
            z-index: 103;
            pointer-events: none;
        }
        
        .power-light {
            position: fixed;
            bottom: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--primary-color);
            box-shadow: 0 0 10px var(--primary-color);
            z-index: 104;
            animation: power-flicker 3s infinite;
        }
        
        @keyframes power-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
            51% { opacity: 0.3; }
            52% { opacity: 0.7; }
            95% { opacity: 0.8; }
        }
        
        /* Стили для режима паники */
        .panic-mode {
            color: #f00 !important;
            border-color: #f00 !important;
            box-shadow: 0 0 10px #f00 !important;
        }
        
        .panic-mode .container {
            box-shadow: 0 0 10px #f00, 0 0 20px #f00 !important;
            border: 2px solid #f00 !important;
        }
        
        .panic-mode .game-area {
            border: 2px solid #f00 !important;
            box-shadow: 0 0 10px #f00 !important;
        }
        
        .panic-mode input[type="number"] {
            border: 2px solid #f00 !important;
            color: #f00 !important;
            box-shadow: 0 0 5px #f00 !important;
        }
        
        .panic-mode button {
            color: #f00 !important;
            border: 2px solid #f00 !important;
            box-shadow: 0 0 5px #f00 !important;
        }
        
        .panic-mode button:hover, .panic-mode button:active {
            background-color: #f00 !important;
            color: #000 !important;
        }
        
        .panic-mode .message {
            border: 2px solid #f00 !important;
            box-shadow: 0 0 5px #f00 !important;
        }
        
        .panic-mode .hint {
            background-color: #300 !important;
            border: 2px solid #f00 !important;
            color: #f00 !important;
        }
        
        .panic-mode .success {
            background-color: #300 !important;
            border: 2px solid #f00 !important;
            color: #f00 !important;
        }
        
        .panic-mode .attempts {
            color: #f00 !important;
        }
        
        .panic-mode .rules {
            background-color: #300 !important;
            border: 2px solid #f00 !important;
            color: #f00 !important;
        }
        
        .panic-mode .history-section {
            background-color: #300 !important;
            border: 1px solid #f00 !important;
        }
        
        .panic-mode .history-list {
            background-color: #200 !important;
            border: 1px dashed #f00 !important;
            color: #f00 !important;
        }
        
        .panic-mode .stats-section {
            background-color: #300 !important;
            border: 1px solid #f00 !important;
        }
        
        .panic-mode .stat-item {
            border: 1px solid #f00 !important;
        }
        
        .panic-mode .stat-value {
            color: #f00 !important;
        }
        
        .panic-mode .range-visualization {
            border: 1px solid #f00 !important;
            box-shadow: 0 0 10px #f00 !important;
        }
        
        .panic-mode .range-scale {
            background-color: #300 !important;
            border: 1px solid #f00 !important;
        }
        
        .panic-mode .range-numbers {
            color: #f00 !important;
        }
        
        .panic-mode .range-current {
            background-color: rgba(255, 0, 0, 0.2) !important;
            border: 1px solid #f00 !important;
        }
        
        .panic-mode .scan-line {
            background: rgba(255, 0, 0, 0.3) !important;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5) !important;
        }
        
        .panic-mode .power-light {
            background-color: #f00 !important;
            box-shadow: 0 0 10px #f00 !important;
        }
        
        .shake-screen {
            animation: shake 0.5s infinite;
        }
        
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        
        .panic-timer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            font-size: 36px;
            color: #f00;
            text-shadow: 0 0 10px #f00;
            flex-direction: column;
            display: none;
            pointer-events: none;
            padding: 20px;
            text-align: center;
        }
        
        .panic-timer.active {
            display: flex;
        }
        
        .timer-text {
            font-size: 24px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .timer-count {
            font-size: 48px;
            font-weight: bold;
            color: #f00;
            text-shadow: 0 0 20px #f00;
            animation: timer-pulse 1s infinite;
            margin-bottom: 15px;
        }
        
        @keyframes timer-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(1); }
        }
        
        .panic-warning {
            color: #f00;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            animation: blink 1s infinite;
        }

        .hint-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--background-color);
            border: 3px solid var(--primary-color);
            padding: 20px;
            z-index: 300;
            box-shadow: 0 0 20px var(--primary-color), 0 0 40px var(--primary-color);
            text-align: center;
            animation: hint-appear 0.5s ease-out;
            display: none;
            width: 80%;
            max-width: 300px;
        }
        
        .hint-popup.active {
            display: block;
        }
        
        .hint-popup.panic-mode {
            border: 3px solid #f00;
            box-shadow: 0 0 20px #f00, 0 0 40px #f00;
            color: #f00;
        }
        
        @keyframes hint-appear {
          0% { 
            opacity: 0;
            }
         100% { 
            opacity: 1;
            }
        }
        
        .hint-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-color);
        }
        
        .hint-value {
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
            color: var(--primary-color);
            text-shadow: 0 0 15px var(--primary-color);
            animation: hint-pulse 1s infinite alternate;
        }
        
        .hint-popup.panic-mode .hint-title,
        .hint-popup.panic-mode .hint-value {
            color: #f00;
            text-shadow: 0 0 10px #f00;
        }
        
        @keyframes hint-pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        .hint-timer {
            margin-top: 15px;
            font-size: 14px;
            color: var(--secondary-color);
        }
        
        .hint-popup.panic-mode .hint-timer {
            color: #a00;
        }
        
        .hint-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 299;
            display: none;
        }
        
        .hint-overlay.active {
            display: block;
        }
        
        /* Стили для режима тревоги */
        .alarm-mode {
            color: #ff0 !important;
            border-color: #ff0 !important;
            box-shadow: 0 0 10px #ff0 !important;
        }
        
        .alarm-mode .container {
            box-shadow: 0 0 10px #ff0, 0 0 20px #ff0 !important;
            border: 2px solid #ff0 !important;
        }
        
        .alarm-mode .game-area {
            border: 2px solid #ff0 !important;
            box-shadow: 0 0 10px #ff0 !important;
        }
        
        .alarm-mode input[type="number"] {
            border: 2px solid #ff0 !important;
            color: #ff0 !important;
            box-shadow: 0 0 5px #ff0 !important;
        }
        
        .alarm-mode button {
            color: #ff0 !important;
            border: 2px solid #ff0 !important;
            box-shadow: 0 0 5px #ff0 !important;
        }
        
        .alarm-mode button:hover, .alarm-mode button:active {
            background-color: #ff0 !important;
            color: #000 !important;
        }
        
        .alarm-mode .message {
            border: 2px solid #ff0 !important;
            box-shadow: 0 0 5px #ff0 !important;
        }
        
        .alarm-mode .hint {
            background-color: #333300 !important;
            border: 2px solid #ff0 !important;
            color: #ff0 !important;
        }
        
        .alarm-mode .success {
            background-color: #333300 !important;
            border: 2px solid #ff0 !important;
            color: #ff0 !important;
        }
        
        .alarm-mode .attempts {
            color: #ff0 !important;
        }
        
        .alarm-mode .rules {
            background-color: #333300 !important;
            border: 2px solid #ff0 !important;
            color: #ff0 !important;
        }
        
        .alarm-mode .history-section {
            background-color: #333300 !important;
            border: 1px solid #ff0 !important;
        }
        
        .alarm-mode .history-list {
            background-color: #222200 !important;
            border: 1px dashed #ff0 !important;
            color: #ff0 !important;
        }
        
        .alarm-mode .stats-section {
            background-color: #333300 !important;
            border: 1px solid #ff0 !important;
        }
        
        .alarm-mode .stat-item {
            border: 1px solid #ff0 !important;
        }
        
        .alarm-mode .stat-value {
            color: #ff0 !important;
        }
        
        .alarm-mode .range-visualization {
            border: 1px solid #ff0 !important;
            box-shadow: 0 0 10px #ff0 !important;
        }
        
        .alarm-mode .range-scale {
            background-color: #333300 !important;
            border: 1px solid #ff0 !important;
        }
        
        .alarm-mode .range-numbers {
            color: #ff0 !important;
        }
        
        .alarm-mode .range-current {
            background-color: rgba(255, 255, 0, 0.2) !important;
            border: 1px solid #ff0 !important;
        }
        
        .alarm-mode .scan-line {
            background: rgba(255, 255, 0, 0.3) !important;
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.5) !important;
        }
        
        .alarm-mode .power-light {
            background-color: #ff0 !important;
            box-shadow: 0 0 10px #ff0 !important;
        }
        
        .alarm-timer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            font-size: 36px;
            color: #ff0;
            text-shadow: 0 0 10px #ff0;
            flex-direction: column;
            display: none;
            pointer-events: none;
            padding: 20px;
            text-align: center;
        }
        
        .alarm-timer.active {
            display: flex;
        }
        
        .alarm-timer .timer-text {
            font-size: 24px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .alarm-timer .timer-count {
            font-size: 48px;
            font-weight: bold;
            color: #ff0;
            text-shadow: 0 0 20px #ff0;
            animation: alarm-timer-pulse 1s infinite;
            margin-bottom: 15px;
        }
        
        @keyframes alarm-timer-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .alarm-warning {
            color: #ff0;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            animation: blink 1s infinite;
        }
        
        /* Стили для кнопки сброса прогресса */
        .reset-section {
            margin-top: 20px;
            padding: 12px;
            background-color: #200;
            border-radius: 0;
            font-size: 14px;
            border: 2px solid #500;
            text-align: center;
        }

        .reset-section p {
            margin: 15px 0;
            line-height: 1.5;
            color: #a00;
        }
        
        .reset-section h3 {
            margin-top: 0;
            text-align: center;
            color: #a00;
        }
        
        #resetProgressBtn {
            background-color: #200;
            color: #a00;
            border: 2px solid #a00;
            margin-top: 10px;
        }
        
        #resetProgressBtn:hover, #resetProgressBtn:active {
            background-color: #a00;
            color: #200;
        }
        
        /* Модальное окно подтверждения сброса */
        .reset-confirm-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 400;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .reset-confirm-overlay.active {
            display: flex;
        }
        
        .reset-confirm-popup {
            background-color: var(--background-color);
            border: 3px solid #a00;
            padding: 25px;
            max-width: 90%;
            width: 400px;
            text-align: center;
            box-shadow: 0 0 20px #a00, 0 0 40px #a00;
            animation: hint-appear 0.5s ease-out;
        }
        
        .reset-confirm-popup h3 {
            margin-top: 0;
            color: #a00;
            text-shadow: 0 0 10px #a00;
            font-size: 20px;
        }
        
        .reset-confirm-popup p {
            margin: 15px 0;
            color: #a00;
            line-height: 1.5;
        }
        
        .reset-confirm-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .reset-confirm-btn {
            padding: 10px 20px;
            border: 2px solid;
            background-color: var(--background-color);
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            cursor: pointer;
            flex: 1;
            transition: all 0.3s ease;
        }
        
        #confirmResetBtn {
            color: #a00;
            border-color: #a00;
        }
        
        #confirmResetBtn:hover, #confirmResetBtn:active {
            background-color: #a00;
            color: var(--background-color);
        }
        
        #cancelResetBtn {
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        #cancelResetBtn:hover, #cancelResetBtn:active {
            background-color: var(--secondary-color);
            color: var(--background-color);
        }

        .shop-section {
            margin-top: 20px;
            padding: 12px;
            background-color: #111;
            border-radius: 0;
            font-size: 14px;
            border: 2px solid #fff;
            text-align: center;
        }
        
        .shop-section h3 {
            margin-top: 0;
            text-align: center;
            color: #fff;
        }

        .shop-section p {
            margin: 15px 0;
            line-height: 1.5;
            color: #fff;
        }
        
        #shopBtn {
            background-color: #111;
            color: #fff;
            border: 2px solid #fff;
            margin-top: 10px;
        }
        
        #shopBtn:hover, #shopBtn:active {
            background-color: #fff;
            color: #111;
        }
        
        /* Стили для модального окна магазина */
        .shop-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 400;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .shop-overlay.active {
            display: flex;
        }
        
        .shop-popup {
            background-color: var(--background-color);
            border: 3px solid #fff;
            padding: 25px;
            max-width: 90%;
            width: 500px;
            text-align: center;
            box-shadow: 0 0 20px #fff, 0 0 40px #fff;
            animation: hint-appear 0.5s ease-out;
        }
        
        .shop-popup h3 {
            margin-top: 0;
            color: #fff;
            text-shadow: 0 0 10px #fff;
            font-size: 20px;
        }
        
        .shop-popup p {
            margin: 15px 0;
            line-height: 1.5;
            color: #fff;
        }
        
        .shop-close-btn {
            padding: 10px 20px;
            border: 2px solid #fff;
            background-color: var(--background-color);
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .shop-close-btn:hover, .shop-close-btn:active {
            background-color: #fff;
            color: var(--background-color);
        }

        .shop-info {
            margin: 15px 0;
            padding: 10px;
            background-color: #222;
            border: 1px solid #fff;
            text-align: center;
        }
        
        .shop-markup-value {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px #fff;
            margin: 10px 0;
        }
        
        .shop-note {
            font-size: 12px;
            color: #aaa;
            margin-top: 10px;
        }

        .shop-markup-text {
            color: #fff;
            margin-top: 10px;
        }

        /* Стили для монеток */
        .coins-value {
            color: #ffffff !important;
            text-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff, 0 0 30px #00ffff, 0 0 40px #00ffff;
            animation: coins-glow 2s infinite alternate;
            font-weight: bold;
            position: relative;
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(0,255,255,0.1));
            border: 1px solid rgba(255,255,255,0.3);
        }

        @keyframes coins-glow {
            0% {
                text-shadow: 0 0 5px #ffffff, 0 0 10px #ffffff, 0 0 15px #00ffff, 0 0 20px #00ffff;
                transform: scale(1);
            }
            100% {
                text-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff, 0 0 30px #00ffff, 0 0 40px #00ffff, 0 0 50px #00ffff;
                transform: scale(1.05);
            }
        }

        .coins-value::before {
            content: "M";
            margin-right: 5px;
            display: inline-block;
            animation: coin-spin 3s infinite linear;
        }

        @keyframes coin-spin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        /* Эффект для увеличения счетчика монеток */
        @keyframes coins-count-up {
            0% { 
                transform: scale(1);
                text-shadow: 0 0 5px #ffffff;
            }
            50% { 
                transform: scale(1.3);
                text-shadow: 0 0 20px #ffff00, 0 0 30px #ffff00;
            }
            100% { 
                transform: scale(1);
                text-shadow: 0 0 10px #ffffff;
            }
        }

        .coins-count-up {
            animation: coins-count-up 0.5s ease-out;
        }

        /* Специальный стиль для монеток в магазине */
        .shop-coins-display {
            color: #ffffff !important;
            text-shadow: 0 0 10px #ffffff, 0 0 20px #ffff00, 0 0 30px #ffff00;
            animation: shop-coins-glow 3s infinite alternate;
            font-size: 24px !important;
            font-weight: bold;
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
        }

        @keyframes shop-coins-glow {
            0% {
                text-shadow: 0 0 5px #ffffff, 0 0 10px #ffff00, 0 0 15px #ffff00;
                transform: scale(1);
            }
            100% {
                text-shadow: 0 0 10px #ffffff, 0 0 20px #ffff00, 0 0 30px #ffff00, 0 0 40px #ffff00;
                transform: scale(1.05);
            }
        }

        .shop-coins-display::before {
            content: "M";
            margin-right: 10px;
            display: inline-block;
            animation: coin-spin 3s infinite linear;
        }

        /* Стили для товаров в магазине */
        .shop-items {
            margin: 20px 0;
        }

        .shop-item {
            padding: 15px;
            margin-bottom: 15px;
            background-color: #222;
            border: 1px solid #fff;
            border-radius: 0;
            text-align: left;
        }

        .shop-item-name {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 10px;
        }

        .shop-item-description {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .shop-item-price {
            font-size: 16px;
            color: #ff0;
            margin-bottom: 10px;
        }

        .shop-buy-btn {
            background-color: #333;
            color: #fff;
            border: 2px solid #fff;
            padding: 8px 15px;
            cursor: pointer;
            font-family: 'Courier New', Courier, monospace;
            transition: all 0.3s ease;
        }

        .shop-buy-btn:hover {
            background-color: #fff;
            color: #333;
        }

        .shop-buy-btn:disabled {
            background-color: #555;
            color: #888;
            border-color: #555;
            cursor: not-allowed;
        }

        .shop-item-owned {
            color: #0f0;
            font-weight: bold;
            margin-top: 5px;
        }

.inventory-section {
    margin-top: 20px;
    padding: 12px;
    background-color: #111;
    border-radius: 0;
    font-size: 14px;
    border: 2px solid #0a0;
    text-align: center;
}

.inventory-section h3 {
    margin-top: 0;
    text-align: center;
    color: #0a0;
}

.inventory-section p {
    margin: 15px 0;
    line-height: 1.5;
    color: #0a0;
}

.inventory-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 10px;
    margin-top: 15px;
}

.inventory-item {
    padding: 12px;
    background-color: #051005;
    border: 1px solid #0a0;
    border-radius: 0;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.inventory-item.empty {
    grid-column: 1 / -1;
    opacity: 0.7;
}

.inventory-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 255, 0, 0.2);
}

.inventory-icon {
    font-size: 24px;
    margin-bottom: 8px;
}

.inventory-name {
    font-weight: bold;
    color: #0f0;
    margin-bottom: 5px;
}

.inventory-description {
    font-size: 12px;
    color: #0a0;
    margin-bottom: 10px;
}

.inventory-count {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: #0f0;
    color: #000;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 12px;
    font-weight: bold;
}

.inventory-use-btn {
    background-color: #0a0;
    color: #000;
    border: none;
    padding: 5px 10px;
    font-size: 12px;
    cursor: pointer;
    font-family: 'Courier New', Courier, monospace;
    margin-top: 5px;
}

.inventory-use-btn:hover {
    background-color: #0f0;
}

/* Стили для инвентаря в режиме паники */
.panic-mode .inventory-section {
    background-color: #300 !important;
    border: 2px solid #f00 !important;
}

.panic-mode .inventory-section h3,
.panic-mode .inventory-section p {
    color: #f00 !important;
}

.panic-mode .inventory-item {
    background-color: #200 !important;
    border: 1px solid #f00 !important;
}

.panic-mode .inventory-name {
    color: #f00 !important;
}

.panic-mode .inventory-description {
    color: #a00 !important;
}

.panic-mode .inventory-count {
    background-color: #f00 !important;
    color: #000 !important;
}

.panic-mode .inventory-use-btn {
    background-color: #a00 !important;
    color: #000 !important;
}

.panic-mode .inventory-use-btn:hover {
    background-color: #f00 !important;
}

/* Стили для инвентаря в режиме тревоги */
.alarm-mode .inventory-section {
    background-color: #333300 !important;
    border: 2px solid #ff0 !important;
}

.alarm-mode .inventory-section h3,
.alarm-mode .inventory-section p {
    color: #ff0 !important;
}

.alarm-mode .inventory-item {
    background-color: #222200 !important;
    border: 1px solid #ff0 !important;
}

.alarm-mode .inventory-name {
    color: #ff0 !important;
}

.alarm-mode .inventory-description {
    color: #aa0 !important;
}

.alarm-mode .inventory-count {
    background-color: #ff0 !important;
    color: #000 !important;
}

.alarm-mode .inventory-use-btn {
    background-color: #aa0 !important;
    color: #000 !important;
}

.alarm-mode .inventory-use-btn:hover {
    background-color: #ff0 !important;
}

        .shop-item-price {
            font-size: 16px;
            color: #ff0;
            margin-bottom: 10px;
        }
        
        .shop-original-price {
            text-decoration: line-through;
            color: #aaa;
            font-size: 14px;
            margin-right: 5px;
        }
        
        .shop-final-price {
            color: #ff0;
            font-weight: bold;
        }
        
        .shop-markup-note {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }

        /* Медиа-запросы для адаптивности */
        @media (min-width: 480px) {
            .buttons-container {
                flex-direction: row;
            }
            
            .stats {
                flex-direction: row;
            }
            
            .stats-row {
                flex: 1;
            }
        }
        
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            .container {
                max-width: 700px;
                margin: 0 auto;
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .game-area {
                padding: 15px;
            }
            
            .buttons-container {
                flex-direction: row;
            }
        }
        
        /* Отключение анимаций для пользователей, предпочитающих уменьшенное движение */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="crt-effect">
    <div class="scan-line"></div>
    <div class="crt-noise"></div>
    <div class="vignette"></div>
    <div class="power-light"></div>
    
    <!-- Новый элемент для подсказки -->
    <div class="hint-overlay" id="hintOverlay"></div>
    <div class="hint-popup" id="hintPopup">
        <div class="hint-title">ПОДСКАЗКА СИСТЕМЫ</div>
        <div>Попробуй число:</div>
        <div class="hint-value" id="hintNumber">500</div>
        <div class="hint-timer">Исчезнет через: <span id="hintTimer">5</span> сек.</div>
    </div>
    
    <!-- Таймер режима паники -->
    <div class="panic-timer" id="panicTimer">
        <div class="timer-text">РЕЖИМ ПАНИКИ!</div>
        <div class="timer-count" id="timerCount">10</div>
        <div class="timer-text">+15 попыток через:</div>
    </div>
    
    <!-- Таймер режима тревоги -->
    <div class="alarm-timer" id="alarmTimer">
        <div class="timer-text">РЕЖИМ ТРЕВОГИ!</div>
        <div class="timer-count" id="alarmTimerCount">20</div>
        <div class="timer-text">+10 попыток через:</div>
    </div>
    
    <!-- Окно подтверждения сброса прогресса -->
    <div class="reset-confirm-overlay" id="resetConfirmOverlay">
        <div class="reset-confirm-popup">
            <h3>СБРОС ПРОГРЕССА</h3>
            <p>Вы уверены, что хотите сбросить ВЕСЬ прогресс за ВСЕ игры?</p>
            <p>Это действие нельзя отменить!</p>
            <div class="reset-confirm-buttons">
                <button id="confirmResetBtn" class="reset-confirm-btn">ДА, СБРОСИТЬ</button>
                <button id="cancelResetBtn" class="reset-confirm-btn">ОТМЕНА</button>
            </div>
        </div>
    </div>

    <div class="shop-overlay" id="shopOverlay">
        <div class="shop-popup">
            <h3>МАГАЗИН</h3>
            <div class="shop-coins-display" id="shopCoinsDisplay">0</div>
            <div class="shop-info">
                <div class="shop-markup-text">Текущая наценка:</div>
                <div class="shop-markup-value" id="shopMarkup">0%</div>
                <div class="shop-note">Наценка равна среднему количеству попыток за все игры</div>
            </div>
            <div class="shop-items" id="shopItems">
                <!-- Товары будут добавляться динамически -->
            </div>
            <button class="shop-close-btn" id="shopCloseBtn">ЗАКРЫТЬ</button>
        </div>
    </div>
    
    <div class="container pixel-border">
        <h1 class="glitch-text" data-text="PROJECT 500">PROJECT 500</h1>
        <div class="subtitle terminal-text">МАКСИМ ЗАКИРОВ 0.8</div>
        
        <div class="game-area pixel-border-reverse">
            <p>Я загадал число от 1 до 1000. Попробуй угадать его!</p>
            
            <input type="number" id="guessInput" min="1" max="1000" placeholder="Введите число от 1 до 1000" inputmode="numeric">
            
            <div class="buttons-container">
                <button id="guessBtn" class="pixel-border">ПРОВЕРИТЬ</button>
                <button id="newGameBtn" class="pixel-border">НОВАЯ ИГРА</button>
            </div>
            
            <div id="message" class="message"></div>
            <div id="attempts" class="attempts">Попытки: 0</div>
            
            <!-- Визуализация диапазона -->
            <div class="range-visualization" id="rangeVisualization">
                <div class="range-scale" id="rangeScale">
                    <div class="range-current" id="rangeCurrent"></div>
                    <!-- Маркеры будут добавляться динамически -->
                </div>
                <div class="range-numbers">
                    <span>1</span>
                    <span>1000</span>
                </div>
                <div class="stats">
                    <div class="stats-row">
                        <div>Минимум: <span id="minValue">1</span></div>
                        <div>Максимум: <span id="maxValue">1000</span></div>
                    </div>
                    <div class="stats-row">
                        <div>Текущий диапазон: <span id="currentRange">1-1000</span></div>
                    </div>
                </div>
                <div id="panicWarning" class="panic-warning" style="display: none;">
                    ВНИМАНИЕ! Диапазон сужается! Скоро активируется режим паники!
                </div>
                <div id="alarmWarning" class="alarm-warning" style="display: none;">
                    ВНИМАНИЕ! Следующая активация режима тревоги через: <span id="alarmAttemptsLeft">2</span> попыток
                </div>
            </div>
            
            <!-- Секция истории -->
            <div class="history-section">
                <h3>ИСТОРИЯ ПОПЫТОК:</h3>
                <div id="historyList" class="history-list">
                    <!-- История будет добавляться сюда -->
                </div>
            </div>
            
            <!-- Секция статистики -->
            <div class="stats-section">
                <h3>СТАТИСТИКА:</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">СЫГРАНО ИГР</div>
                        <div class="stat-value" id="gamesPlayed">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">РЕКОРД</div>
                        <div class="stat-value" id="bestScore">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">МОНЕТКИ</div>
                        <div class="stat-value coins-value" id="coins">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">АНТИ-РЕКОРД</div>
                        <div class="stat-value" id="worstScore">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">СРЕДНЕЕ</div>
                        <div class="stat-value" id="averageAttempts">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ПОСЛЕДНЯЯ</div>
                        <div class="stat-value" id="lastAttempts">-</div>
                    </div>
                </div>
            </div>

            <div class="shop-section">
                <h3>МАГАЗИН</h3>
                <p>Тратьте заработанные монетки на улучшения!</p>
                <button id="shopBtn" class="pixel-border">ОТКРЫТЬ МАГАЗИН</button>
            </div>
            
            <div class="inventory-section">
                <h3>ИНВЕНТАРЬ</h3>
                <p>Здесь отображаются ваши приобретенные улучшения</p>
                <div id="inventoryList" class="inventory-list">
                    <div class="inventory-item empty">
                        <div class="inventory-icon">📦</div>
                        <div class="inventory-name">Инвентарь пуст</div>
                        <div class="inventory-description">Купите улучшения в магазине</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="rules pixel-border-reverse">
            <h3>ПРАВИЛА ИГРЫ:</h3>
            <ul>
                <li>Компьютер загадывает случайное число от 1 до 1000</li>
                <li>Вы вводите число в поле выше и нажимаете "ПРОВЕРИТЬ"</li>
                <li>Компьютер подскажет, больше или меньше загаданное число</li>
                <li>Цель - угадать число за минимальное количество попыток</li>
                <li>За каждую игру вы получаете монетки, количество равным загаданному числу</li>
                <li>Каждая попытка стоит 1 монетку</li>
                <li>Бонусы за рекорды: ≤2 попыток = +40%, ≤6 попыток = +20%, ≤8 попыток = +15%</li>
                <li>Для начала новой игры нажмите кнопку "НОВАЯ ИГРА"</li>
                <li>Все ваши попытки сохраняются в истории ниже</li>
                <li>Диапазон возможных чисел сужается после каждой попытки</li>
                <li>Когда диапазон становится узким, он начинает светиться!</li>
                <li>При сужении диапазона до 10 чисел активируется режим паники!</li>
                <li>После 10 попыток и затем каждые 2 попытки активируется режим тревоги!</li>
                <li>Каждые 5 попыток система предлагает подсказку</li>
                <li>Режим тревоги отключается после ввода числа</li>
                <li>В магазине можно приобрести улучшения за монетки</li>
                <li>Предмет "Бонусная Сложность": каждая попытка с вероятностью 50% активирует режим тревоги на 5 секунд. Если таймер истекает, добавляется 5 попыток. Если успеваете ввести число до истечения таймера, получаете +25% монеток</li>
            </ul>
        </div>
        
        <!-- Новая секция с кнопкой сброса прогресса -->
        <div class="reset-section">
            <h3>ОПАСНАЯ ЗОНА</h3>
            <p>Нажатие этой кнопки полностью сбросит всю статистику и прогресс</p>
            <button id="resetProgressBtn" class="pixel-border">СБРОСИТЬ ВЕСЬ ПРОГРЕСС</button>
        </div>
    </div>

    <script>
        // Игровые переменные
        let targetNumber;
        let attempts;
        let gameActive;
        let guessHistory;
        const minRange = 1;
        const maxRange = 1000;
        let currentMin;
        let currentMax;
        let panicModeActive = false;
        let panicTimer;
        let panicTimeLeft = 10;
        
        // Переменные для режима тревоги
        let alarmModeActive = false;
        let alarmTimer;
        let alarmTimeLeft = 20;
        let nextAlarmAttempt = 10; // Первая активация на 10-й попытке
        
        // Статистика
        let gamesPlayed = 0;
        let bestScore = null;
        let worstScore = null;
        let totalAttempts = 0;
        let lastAttempts = 0;
        let coins = 0;
        
        // Инвентарь и магазин
        let inventory = [];
        let shopItems = [
            {
                id: 'bonus_difficulty',
                name: 'Бонусная Сложность',
                description: '3 раза за игру: каждая попытка с вероятностью 50% активирует режим тревоги на 5 секунд. Если таймер истекает, +5 попыток. Если успеваете ввести число, +25% монеток.',
                price: 275,
                icon: '⚡',
                owned: false
            },
            {
                id: 'calming',
                name: 'Успокаивающие',
                description: 'Увеличивает время в режиме паники до 15 секунд (вместо 10)',
                price: 150,
                icon: '💊',
                owned: false
            }
        ];
        
        // Переменные для бонусной сложности
        let bonusDifficultyActive = false;
        let bonusDifficultyTimer;
        let bonusDifficultyTimeLeft = 5;
        let bonusDifficultyActivations = 0; // Счетчик активаций за игру
        const MAX_BONUS_ACTIVATIONS = 3; // Максимум 3 активации за игру
        
        // Элементы DOM
        const guessInput = document.getElementById('guessInput');
        const guessBtn = document.getElementById('guessBtn');
        const newGameBtn = document.getElementById('newGameBtn');
        const messageEl = document.getElementById('message');
        const attemptsEl = document.getElementById('attempts');
        const historyListEl = document.getElementById('historyList');
        const bodyEl = document.body;
        const shopBtn = document.getElementById('shopBtn');
        const shopOverlay = document.getElementById('shopOverlay');
        const shopCloseBtn = document.getElementById('shopCloseBtn');
        const shopCoinsDisplay = document.getElementById('shopCoinsDisplay');
        const shopItemsEl = document.getElementById('shopItems');
        const inventoryListEl = document.getElementById('inventoryList');
        
        // Элементы для режима тревоги
        const alarmTimerEl = document.getElementById('alarmTimer');
        const alarmTimerCountEl = document.getElementById('alarmTimerCount');
        
        // Элементы для паники
        const panicTimerEl = document.getElementById('panicTimer');
        const timerCountEl = document.getElementById('timerCount');
        
        // Элементы статистики
        const gamesPlayedEl = document.getElementById('gamesPlayed');
        const bestScoreEl = document.getElementById('bestScore');
        const worstScoreEl = document.getElementById('worstScore');
        const coinsEl = document.getElementById('coins');
        const averageAttemptsEl = document.getElementById('averageAttempts');
        const lastAttemptsEl = document.getElementById('lastAttempts');
        
        // Элементы для сброса прогресса
        const resetProgressBtn = document.getElementById('resetProgressBtn');
        const resetConfirmOverlay = document.getElementById('resetConfirmOverlay');
        const confirmResetBtn = document.getElementById('confirmResetBtn');
        const cancelResetBtn = document.getElementById('cancelResetBtn');

        // Функции для магазина
        function openShop() {
            updateShopDisplay();
            shopOverlay.classList.add('active');
        }
        
        function closeShop() {
            shopOverlay.classList.remove('active');
        }
        
        function updateShopDisplay() {
            // Обновляем отображение монеток в магазине
            shopCoinsDisplay.textContent = coins;
            
            // Обновляем наценку
            const shopMarkupEl = document.getElementById('shopMarkup');
            let markup = 0;
            
            if (gamesPlayed > 0) {
                // Наценка равна среднему количеству попыток (округляем до целого)
                markup = Math.round(totalAttempts / gamesPlayed);
            }
            
            shopMarkupEl.textContent = `${markup}%`;
            
            // Обновляем список товаров
            renderShopItems(markup);
        }
        
        function renderShopItems(markup) {
            shopItemsEl.innerHTML = '';
            
            shopItems.forEach(item => {
                const shopItemEl = document.createElement('div');
                shopItemEl.className = 'shop-item';
                
                const owned = inventory.includes(item.id);
                
                // Рассчитываем окончательную цену с учетом наценки
                const finalPrice = Math.round(item.price * (1 + markup / 100));
                
                shopItemEl.innerHTML = `
                    <div class="shop-item-name">${item.icon} ${item.name}</div>
                    <div class="shop-item-description">${item.description}</div>
                    <div class="shop-item-price">
                        <span class="shop-original-price">${item.price} монеток</span>
                        <span class="shop-final-price">${finalPrice} монеток</span>
                    </div>
                    <div class="shop-markup-note">(Наценка: +${markup}%)</div>
                    ${owned ? 
                        '<div class="shop-item-owned">✓ УЖЕ КУПЛЕНО</div>' : 
                        `<button class="shop-buy-btn" data-item="${item.id}" data-price="${finalPrice}" ${coins < finalPrice ? 'disabled' : ''}>КУПИТЬ</button>`
                    }
                `;
                
                shopItemsEl.appendChild(shopItemEl);
            });
            
            // Добавляем обработчики событий для кнопок покупки
            document.querySelectorAll('.shop-buy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = this.getAttribute('data-item');
                    const price = parseInt(this.getAttribute('data-price'));
                    buyItem(itemId, price);
                });
            });
        }
        
        function buyItem(itemId, price) {
            const item = shopItems.find(i => i.id === itemId);
            
            if (!item) return;
            
            if (coins < price) {
                messageEl.textContent = 'Недостаточно монеток для покупки!';
                messageEl.className = 'message hint';
                return;
            }
            
            if (inventory.includes(itemId)) {
                messageEl.textContent = 'Этот предмет уже куплен!';
                messageEl.className = 'message hint';
                return;
            }
            
            // Покупка предмета
            coins -= price;
            inventory.push(itemId);
            item.owned = true;
            
            // Сохраняем обновленные данные
            saveStats();
            updateStatsDisplay(true);
            updateShopDisplay();
            updateInventoryDisplay();
            
            messageEl.textContent = `Поздравляем! Вы купили "${item.name}"!`;
            messageEl.className = 'message success';
            
            // Закрываем магазин после покупки
            closeShop();
        }
        
        // Функции для инвентаря
        function updateInventoryDisplay() {
            inventoryListEl.innerHTML = '';
            
            if (inventory.length === 0) {
                inventoryListEl.innerHTML = `
                    <div class="inventory-item empty">
                        <div class="inventory-icon">📦</div>
                        <div class="inventory-name">Инвентарь пуст</div>
                        <div class="inventory-description">Купите улучшения в магазине</div>
                    </div>
                `;
                return;
            }
            
            inventory.forEach(itemId => {
                const item = shopItems.find(i => i.id === itemId);
                if (!item) return;
                
                const inventoryItemEl = document.createElement('div');
                inventoryItemEl.className = 'inventory-item';
                
                inventoryItemEl.innerHTML = `
                    <div class="inventory-icon">${item.icon}</div>
                    <div class="inventory-name">${item.name}</div>
                    <div class="inventory-description">${item.description}</div>
                `;
                
                inventoryListEl.appendChild(inventoryItemEl);
            });
        }
        
        // Функции для бонусной сложности
        function activateBonusDifficulty() {
            // Проверяем условия активации
            if (bonusDifficultyActive || 
                !inventory.includes('bonus_difficulty') || 
                bonusDifficultyActivations >= MAX_BONUS_ACTIVATIONS) {
                return;
            }
            
            // С вероятностью 50% активируем бонусную сложность
            if (Math.random() < 0.5) {
                bonusDifficultyActive = true;
                bonusDifficultyActivations++; // Увеличиваем счетчик активаций
                
                bodyEl.classList.add('alarm-mode');
                alarmTimerEl.classList.add('active');
                bonusDifficultyTimeLeft = 5;
                alarmTimerCountEl.textContent = bonusDifficultyTimeLeft;
                
                // Обновляем текст для бонусной сложности
                document.querySelector('.alarm-timer .timer-text').textContent = 'БОНУСНАЯ СЛОЖНОСТЬ!';
                document.querySelectorAll('.alarm-timer .timer-text')[1].textContent = '+25% монеток если успеете!';
                
                // Запускаем таймер
                bonusDifficultyTimer = setInterval(function() {
                    bonusDifficultyTimeLeft--;
                    alarmTimerCountEl.textContent = bonusDifficultyTimeLeft;
                    
                    if (bonusDifficultyTimeLeft <= 0) {
                        deactivateBonusDifficulty(false);
                        attempts += 5;
                        attemptsEl.textContent = `Попытки: ${attempts}`;
                        messageEl.textContent = 'Время вышло! +5 попыток!';
                        messageEl.className = 'message hint';
                    }
                }, 1000);
            }
        }
        
        function deactivateBonusDifficulty(success) {
            bonusDifficultyActive = false;
            bodyEl.classList.remove('alarm-mode');
            alarmTimerEl.classList.remove('active');
            clearInterval(bonusDifficultyTimer);
            
            // Восстанавливаем стандартный текст для режима тревоги
            document.querySelector('.alarm-timer .timer-text').textContent = 'РЕЖИМ ТРЕВОГИ!';
            document.querySelectorAll('.alarm-timer .timer-text')[1].textContent = '+15 попыток через:';
            
            if (success) {
                // Начисляем бонусные монетки
                const bonusCoins = Math.floor(coins * 0.25);
                coins += bonusCoins;
                updateStatsDisplay(true);
                messageEl.textContent = `Отлично! Вы успели! +${bonusCoins} монеток!`;
                messageEl.className = 'message success';
            }
        }
        
        // Функция сброса прогресса
        function resetProgress() {
            // Сброс статистики
            gamesPlayed = 0;
            bestScore = null;
            worstScore = null;
            totalAttempts = 0;
            lastAttempts = 0;
            coins = 0;
            inventory = [];
            
            // Сброс состояния предметов магазина
            shopItems.forEach(item => {
                item.owned = false;
            });
            
            // Очистка localStorage
            localStorage.removeItem('project500_stats');
            
            // Обновление отображения статистики
            updateStatsDisplay();
            updateInventoryDisplay();
            
            // Перезапуск игры
            initGame();
            
            // Закрытие окна подтверждения
            resetConfirmOverlay.classList.remove('active');
            
            // Показ сообщения о сбросе
            messageEl.textContent = 'ПРОГРЕСС СБРОШЕН!';
            messageEl.className = 'message hint';
        }
        
        // Показать окно подтверждения сброса
        function showResetConfirm() {
            resetConfirmOverlay.classList.add('active');
        }
        
        // Скрыть окно подтверждения сброса
        function hideResetConfirm() {
            resetConfirmOverlay.classList.remove('active');
        }
        
        // Функции для режима тревоги
        function activateAlarmMode() {
            if (alarmModeActive || (currentMax - currentMin) < 15 || bonusDifficultyActive) return;
            
            alarmModeActive = true;
            bodyEl.classList.add('alarm-mode');
            alarmTimerEl.classList.add('active');
            alarmTimeLeft = 20;
            alarmTimerCountEl.textContent = alarmTimeLeft;
            
            // Запускаем таймер
            alarmTimer = setInterval(function() {
                alarmTimeLeft--;
                alarmTimerCountEl.textContent = alarmTimeLeft;
                
                if (alarmTimeLeft <= 0) {
                    deactivateAlarmMode();
                    attempts += 15;
                    attemptsEl.textContent = `Попытки: ${attempts}`;
                    messageEl.textContent = 'РЕЖИМ ТРЕВОГИ ЗАВЕРШЕН! +15 попыток!';
                    messageEl.className = 'message hint';
                    
                    // Устанавливаем следующую активацию через 2 попытки
                    nextAlarmAttempt = attempts + 2;
                }
            }, 1000);
        }
        
        function deactivateAlarmMode() {
            alarmModeActive = false;
            bodyEl.classList.remove('alarm-mode');
            alarmTimerEl.classList.remove('active');
            clearInterval(alarmTimer);
        }
        
        // Функции для режима паники
        function activatePanicMode() {
            if (panicModeActive) return;
            
            panicModeActive = true;
            bodyEl.classList.add('panic-mode');
            panicTimerEl.classList.add('active');
            
            // Устанавливаем время в зависимости от наличия предмета "Успокаивающие"
            if (inventory.includes('calming')) {
                panicTimeLeft = 15; // 15 секунд с предметом
            } else {
                panicTimeLeft = 10; // 10 секунд без предмета
            }
            
            timerCountEl.textContent = panicTimeLeft;
            
            // Запускаем таймер
            panicTimer = setInterval(function() {
                panicTimeLeft--;
                timerCountEl.textContent = panicTimeLeft;
                
                if (panicTimeLeft <= 0) {
                    deactivatePanicMode();
                    attempts += 10;
                    attemptsEl.textContent = `Попытки: ${attempts}`;
                    messageEl.textContent = 'РЕЖИМ ПАНИКИ ЗАВЕРШЕН! +10 попыток!';
                    messageEl.className = 'message hint';
                }
            }, 1000);
        }
        
        function deactivatePanicMode() {
            panicModeActive = false;
            bodyEl.classList.remove('panic-mode');
            panicTimerEl.classList.remove('active');
            clearInterval(panicTimer);
        }
        
        // Загрузка статистики из localStorage
        function loadStats() {
            const savedStats = localStorage.getItem('project500_stats');
            if (savedStats) {
                const stats = JSON.parse(savedStats);
                gamesPlayed = stats.gamesPlayed || 0;
                bestScore = stats.bestScore || null;
                worstScore = stats.worstScore || null;
                totalAttempts = stats.totalAttempts || 0;
                lastAttempts = stats.lastAttempts || 0;
                coins = stats.coins || 0;
                inventory = stats.inventory || [];
                
                // Обновляем состояние предметов магазина
                shopItems.forEach(item => {
                    item.owned = inventory.includes(item.id);
                });
            }
            updateStatsDisplay();
            updateInventoryDisplay();
        }
        
        // Сохранение статистики в localStorage
        function saveStats() {
            const stats = {
                gamesPlayed,
                bestScore,
                worstScore,
                totalAttempts,
                lastAttempts,
                coins,
                inventory
            };
            localStorage.setItem('project500_stats', JSON.stringify(stats));
        }
        
        // Функция для обновления отображения монеток с анимацией
        function updateCoinsDisplay(withAnimation = false) {
            if (withAnimation) {
                coinsEl.classList.add('coins-count-up');
                setTimeout(() => {
                    coinsEl.classList.remove('coins-count-up');
                }, 500);
            }
            
            coinsEl.textContent = coins;
            
            // Обновляем отображение монеток в магазине, если он открыт
            if (shopOverlay.classList.contains('active')) {
                shopCoinsDisplay.textContent = coins;
            }
        }
        
        // Обновление отображения статистики
        function updateStatsDisplay(withCoinAnimation = false) {
            gamesPlayedEl.textContent = gamesPlayed;
            
            if (bestScore !== null) {
                bestScoreEl.textContent = bestScore;
            } else {
                bestScoreEl.textContent = '-';
            }
            
            if (worstScore !== null) {
                worstScoreEl.textContent = worstScore;
            } else {
                worstScoreEl.textContent = '-';
            }
            
            // Обновляем отображение монеток с возможной анимацией
            updateCoinsDisplay(withCoinAnimation);
            
            if (gamesPlayed > 0) {
                const average = (totalAttempts / gamesPlayed).toFixed(1);
                averageAttemptsEl.textContent = average;
            } else {
                averageAttemptsEl.textContent = '-';
            }
            
            if (lastAttempts > 0) {
                lastAttemptsEl.textContent = lastAttempts;
            } else {
                lastAttemptsEl.textContent = '-';
            }
        }
        
        // Расчет заработанных монеток
        function calculateCoinsEarned() {
            // Базовое количество монеток пропорционально загаданному числу
            let baseCoins = Math.floor(targetNumber / 10);
            
            // Вычитаем 1 монетку за каждую попытку
            let coinsEarned = baseCoins - attempts;
            
            // Не позволяем уйти в отрицательное значение
            if (coinsEarned < 0) coinsEarned = 0;
            
            // Применяем бонусы за рекорд
            let bonusPercent = 0;
            if (attempts <= 2) {
                bonusPercent = 40; // +40% за 2 и менее попыток
            } else if (attempts <= 6) {
                bonusPercent = 20;  // +20% за 6 и менее попыток
            } else if (attempts <= 8) {
                bonusPercent = 15;  // +15% за 8 и менее попыток
            }
            
            // Добавляем бонус
            const bonusAmount = Math.floor(coinsEarned * bonusPercent / 100);
            coinsEarned += bonusAmount;
            
            return {
                base: baseCoins,
                penalty: attempts,
                bonus: bonusAmount,
                total: coinsEarned,
                bonusPercent: bonusPercent
            };
        }
        
        // Обновление статистики после победы
        function updateStats() {
            gamesPlayed++;
            totalAttempts += attempts;
            lastAttempts = attempts;
            
            if (bestScore === null || attempts < bestScore) {
                bestScore = attempts;
            }
            
            if (worstScore === null || attempts > worstScore) {
                worstScore = attempts;
            }
            
            // Расчет заработанных монеток
            const coinsCalculation = calculateCoinsEarned();
            coins += coinsCalculation.total;
            
            // Обновляем статистику с анимацией для монеток
            updateStatsDisplay(true);
            saveStats();
            
            // Показываем сообщение о победе с информацией о монетках
            if (coinsCalculation.bonusPercent > 0) {
                messageEl.innerHTML = `ПОЗДРАВЛЯЕМ! Вы угадали число ${targetNumber} за ${attempts} попыток!<br>Получено монеток: ${coinsCalculation.total} (базово: ${coinsCalculation.base} - штраф: ${coinsCalculation.penalty} + бонус ${coinsCalculation.bonusPercent}%: ${coinsCalculation.bonus})`;
            } else {
                messageEl.innerHTML = `ПОЗДРАВЛЯЕМ! Вы угадали число ${targetNumber} за ${attempts} попыток!<br>Получено монеток: ${coinsCalculation.total} (базово: ${coinsCalculation.base} - штраф: ${coinsCalculation.penalty})`;
            }
        }
        
        // Инициализация игры
        function initGame() {
            currentMin = minRange;
            currentMax = maxRange;
            targetNumber = Math.floor(Math.random() * (maxRange - minRange + 1)) + minRange;
            attempts = 0;
            gameActive = true;
            guessHistory = [];
            
            // Сбрасываем счетчик активаций бонусной сложности
            bonusDifficultyActivations = 0;
            
            // Сбрасываем режимы
            deactivatePanicMode();
            deactivateAlarmMode();
            deactivateBonusDifficulty(false);
            
            // Сбрасываем следующую активацию тревоги
            nextAlarmAttempt = 10;
            
            // Обновление UI
            messageEl.textContent = '';
            messageEl.className = 'message';
            attemptsEl.textContent = 'Попытки: 0';
            historyListEl.innerHTML = '';
            guessInput.value = '';
            guessInput.disabled = false;
            guessBtn.disabled = false;
            guessInput.min = minRange;
            guessInput.max = maxRange;
            guessInput.placeholder = `Введите число от ${minRange} до ${maxRange}`;
            
            // Фокус на поле ввода
            guessInput.focus();
            
            console.log('Загаданное число: ' + targetNumber); // Для отладки
        }
        
        // Обновление истории
        function updateHistory() {
            historyListEl.innerHTML = '';
            
            if (guessHistory.length === 0) {
                historyListEl.innerHTML = '<div class="history-item">История пуста</div>';
                return;
            }
            
            // Показываем историю в обратном порядке (последние попытки сверху)
            guessHistory.slice().reverse().forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                let resultText = '';
                if (item.result === 'correct') {
                    resultText = '✓ УГАДАЛ';
                } else if (item.result === 'higher') {
                    resultText = '↑ БОЛЬШЕ';
                } else {
                    resultText = '↓ МЕНЬШЕ';
                }
                
                historyItem.textContent = `Попытка ${item.attempt}: ${item.guess} - ${resultText}`;
                historyListEl.appendChild(historyItem);
            });
        }
        
        // Обработка попытки угадать
        function makeGuess() {
            if (!gameActive) return;
            
            // Если активна бонусная сложность, деактивируем ее с успехом
            if (bonusDifficultyActive) {
                deactivateBonusDifficulty(true);
            }
            
            // Отключаем режим тревоги при вводе числа
            if (alarmModeActive) {
                deactivateAlarmMode();
                // Устанавливаем следующую активацию через 2 попытки
                nextAlarmAttempt = attempts + 2;
            }
            
            const userGuess = parseInt(guessInput.value);
            
            // Проверка ввода
            if (isNaN(userGuess) || userGuess < minRange || userGuess > maxRange) {
                messageEl.textContent = `Пожалуйста, введите число от ${minRange} до ${maxRange}!`;
                messageEl.className = 'message hint';
                return;
            }
            
            attempts++;
            attemptsEl.textContent = `Попытки: ${attempts}`;
            
            // Проверяем, нужно ли активировать режим тревоги
            if (attempts === nextAlarmAttempt && (currentMax - currentMin) >= 10) {
                activateAlarmMode();
            }
            
            // Проверяем, нужно ли активировать бонусную сложность
            if (inventory.includes('bonus_difficulty') && bonusDifficultyActivations < MAX_BONUS_ACTIVATIONS) {
                activateBonusDifficulty();
                // Показываем информацию об оставшихся активациях
                if (bonusDifficultyActive) {
                    const remaining = MAX_BONUS_ACTIVATIONS - bonusDifficultyActivations;
                    messageEl.textContent += ` (Осталось активаций бонусной сложности: ${remaining})`;
                }
            }
            
            // Проверяем, нужно ли активировать режим паники
            if ((currentMax - currentMin) <= 10 && gameActive && !panicModeActive) {
                activatePanicMode();
            }
            
            // Записываем попытку в историю
            let result;
            if (userGuess === targetNumber) {
                result = 'correct';
                gameActive = false;
                guessInput.disabled = true;
                guessBtn.disabled = true;
                
                // Деактивируем режимы при победе
                deactivatePanicMode();
                deactivateAlarmMode();
                deactivateBonusDifficulty(false);
                
                // Обновляем статистику
                updateStats();
                
                messageEl.className = 'message success';
            } else if (userGuess < targetNumber) {
                result = 'higher';
                messageEl.textContent = 'Загаданное число БОЛЬШЕ!';
                messageEl.className = 'message hint';
                // Обновляем минимальное значение диапазона
                if (userGuess > currentMin) {
                    currentMin = userGuess + 1;
                }
            } else {
                result = 'lower';
                messageEl.textContent = 'Загаданное число МЕНЬШЕ!';
                messageEl.className = 'message hint';
                // Обновляем максимальное значение диапазона
                if (userGuess < currentMax) {
                    currentMax = userGuess - 1;
                }
            }
            
            // Добавляем попытку в историю
            guessHistory.push({
                attempt: attempts,
                guess: userGuess,
                result: result
            });
            
            // Обновляем отображение истории
            updateHistory();
            
            guessInput.value = '';
            guessInput.focus();
        }
        
        // Обработчики событий
        guessBtn.addEventListener('click', makeGuess);
        
        newGameBtn.addEventListener('click', initGame);
        
        guessInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                makeGuess();
            }
        });
        
        // Обработчики для сброса прогресса
        resetProgressBtn.addEventListener('click', showResetConfirm);
        cancelResetBtn.addEventListener('click', hideResetConfirm);
        confirmResetBtn.addEventListener('click', resetProgress);
        
        // Закрытие окна подтверждения при клике на оверлей
        resetConfirmOverlay.addEventListener('click', function(e) {
            if (e.target === resetConfirmOverlay) {
                hideResetConfirm();
            }
        });
        
        // Обработчики событий для магазина
        shopBtn.addEventListener('click', openShop);
        shopCloseBtn.addEventListener('click', closeShop);
        
        // Закрытие магазина при клике на оверлей
        shopOverlay.addEventListener('click', function(e) {
            if (e.target === shopOverlay) {
                closeShop();
            }
        });
        
        // Начало игры при загрузке страницы
        window.onload = function() {
            loadStats();
            initGame();
        };
    </script>
</body>
</html>
